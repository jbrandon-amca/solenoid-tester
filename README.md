# solenoid-tester
## Current state of affairs:
### Load cell 
is outputting data but needs calibration.  There are test weights on the side of the green shelving underneath the Bambu printer.  Cursor should be able to walk you through it - you'll use the "readData" method from AD7124.h, and based on the zero and test weight outputs, you just need to change MEASURED_OFFSET (the ADC reading at zero load) and MEASURED_SCALE_FACTOR_LBS (the slope of whatever best fit line you come up with in your calibration, I just take a bunch of measurements and put it into excel but I'm sure Cursor can automate it even more).  After that, you shouldn't need to do anything but mount it, I left the double-sided tape right there if you choose to use it.
### Linear potentiometers
The current demo sketch for these has a bunch of blocking averaging in it (i.e. when it takes measurements, other code doesn't run simultaneously - although I believe accelStepper uses a timer that runs in the background, so the motor movement may be unaffected, in which case you don't need to change anything).  Other than that, they work nicely - the raw bit output is from 0 to 4096, corresponding to 0 to 10mm of travel - in theory good for around a tenth of a thou.  As I mentioned in our update, the true mechanical travel differs quite a bit from sensor to sensor, but I'm hoping that the length of the internal track is more precise and they'll work out of the bag.  If you see in practice that their response is different (i.e. for a certain number of steps for the motor, the bit code the two sensors change by is different), then I'd just go by the motor number for now - at our very low loads, it should be quite accurate.  The one other thing to be careful of is squishing them when you bring the motor all the way back to zero. I didn't get the chance to make sure that the motor bottoms out before the sensors do, if not then they will break, so tread carefully.
### Motor
I explained the shortcomings to you earlier, but you'll have to take a manual tack when it comes to changing direction.  Either you can screw/unscrew when you need to swap, which should only be once per test, or you can steal a couple of 17-12s that are lying around and hook each of the red and red/white motor wires to the common (middle) pin of the 17-12, and string a wire from each of the other switch terminals to one of the screw terminals.  Janky but functional! Sorry again that I didn't quite get it working.  The max motor speed is 0.4in/sec, I would recommend staying quite a bit below that if you can.  The microstep should currently be set to 1, and the step size of the motor is 0.00015625''.  
### General logging
Each of the above ADC sketches logs data to serial, which should be an easy format for your GUI to interpret.  The motor needs an output adding - fortunately the accelStepper library includes a method called currentPosition or something like that, so it handles everything for you.  Should be fairly straightforward to meld the three current sketches, upload them to the Arduino (it's an Uno R4 Wifi) using the usb-c cable that's already plugged in, and get it synergized with your GUI. 

Let me know if you have any more questions, I'll try and be checking Teams semi-regularly.  And god be with you.  
